


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>CLI &mdash; PyTorch/TorchX main documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!-- <link rel="stylesheet" href="_static/pygments.css" type="text/css" /> -->
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/torchx.css" type="text/css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/katex-math.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="_static/gallery-dataframe.css" type="text/css" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/torchx.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Basic Concepts" href="basics.html" />
    <link rel="prev" title="Quickstart" href="quickstart.html" />
  <!-- Google Analytics -->
  
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-117752657-2"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-117752657-2');
    </script>
  
  <!-- End Google Analytics -->
  

  
  <script src="_static/js/modernizr.min.js"></script>

  <!-- Preload the theme fonts -->

<link rel="preload" href="_static/fonts/FreightSans/freight-sans-book.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/FreightSans/freight-sans-medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/IBMPlexMono/IBMPlexMono-Medium.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/FreightSans/freight-sans-bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/FreightSans/freight-sans-medium-italic.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="_static/fonts/IBMPlexMono/IBMPlexMono-SemiBold.woff2" as="font" type="font/woff2" crossorigin="anonymous">

<!-- Preload the katex fonts -->

<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Main-Bold.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size1-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Size3-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.0/dist/fonts/KaTeX_Caligraphic-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css" integrity="sha384-vSIIfh2YWi9wW0r9iZe7RJPrKwp6bG+s9QZMoITbCckVJqGCCRhc+ccxNcdpHuYu" crossorigin="anonymous">
</head>

<div class="container-fluid header-holder tutorials-header" id="header-holder">
  <div class="container">
    <div class="header-container">
      <a class="header-logo" href="https://pytorch.org/" aria-label="PyTorch"></a>

      <div class="main-menu">
        <ul>
          <li>
            <a href="https://pytorch.org/get-started">Get Started</a>
          </li>

          <li>
            <a href="https://pytorch.org/ecosystem">Ecosystem</a>
          </li>

          <li>
            <a href="https://pytorch.org/mobile">Mobile</a>
          </li>

          <li>
            <a href="https://pytorch.org/blog/">Blog</a>
          </li>

          <li>
            <a href="https://pytorch.org/tutorials">Tutorials</a>
          </li>

          <li>
            <div id="resourcesDropdownButton" data-toggle="resources-dropdown" class="resources-dropdown">
              <a class="resource-option with-down-orange-arrow">
                Docs
              </a>
              <div class="resources-dropdown-menu">
                <a class="doc-dropdown-option nav-dropdown-item" href="https://pytorch.org/docs/stable/index.html">
                  <span class="dropdown-title">PyTorch</span>
                  <p></p>
                </a>
                <a class="doc-dropdown-option nav-dropdown-item" href="https://pytorch.org/audio/stable/index.html">
                  <span class="dropdown-title">torchaudio</span>
                  <p></p>
                </a>
                <a class="doc-dropdown-option nav-dropdown-item" href="https://pytorch.org/text/stable/index.html">
                  <span class="dropdown-title">torchtext</span>
                  <p></p>
                </a>
                <a class="doc-dropdown-option nav-dropdown-item" href="https://pytorch.org/vision/stable/index.html">
                  <span class="dropdown-title">torchvision</span>
                  <p></p>
                </a>
                <a class="doc-dropdown-option nav-dropdown-item" href="https://pytorch.org/torchrec">
                  <span class="dropdown-title">TorchRec</span>
                  <p></p>
                </a>
                <a class="doc-dropdown-option nav-dropdown-item" href="https://pytorch.org/data">
                  <span class="dropdown-title">TorchData</span>
                  <p></p>
                </a>
                <a class="doc-dropdown-option nav-dropdown-item" href="https://pytorch.org/serve/">
                  <span class="dropdown-title">TorchServe</span>
                  <p></p>
                </a>
                <a class="doc-dropdown-option nav-dropdown-item" href="https://pytorch.org/xla">
                  <span class="dropdown-title">PyTorch on XLA Devices</span>
                  <p></p>
                </a>
            </div>
          </li>

          <li>
            <div id="resourcesDropdownButton" data-toggle="resources-dropdown" class="resources-dropdown">
              <a class="resource-option with-down-arrow">
                Resources
              </a>
              <div class="resources-dropdown-menu">
                <a class="nav-dropdown-item" href="https://pytorch.org/features">
                  <span class="dropdown-title">About</span>
                  <p>Learn about PyTorch’s features and capabilities</p>
                </a>
                <a class="nav-dropdown-item" href="https://pytorch.org/#community-module">
                  <span class="dropdown-title">Community</span>
                  <p>Join the PyTorch developer community to contribute, learn, and get your questions answered.</p>
                </a>
                <a class="nav-dropdown-item" href="https://pytorch.org/resources">
                  <span class="dropdown-title">Developer Resources</span>
                  <p>Find resources and get questions answered</p>
                </a>
                <a class="nav-dropdown-item" href="https://discuss.pytorch.org/" target="_blank">
                  <span class="dropdown-title">Forums</span>
                  <p>A place to discuss PyTorch code, issues, install, research</p>
                </a>
                <a class="nav-dropdown-item" href="https://pytorch.org/hub">
                  <span class="dropdown-title">Models (Beta)</span>
                  <p>Discover, publish, and reuse pre-trained models</p>
                </a>
              </div>
            </div>
          </li>

          <li>
            <a href="https://github.com/pytorch/pytorch">GitHub</a>
          </li>
        </ul>
      </div>

      <a class="main-menu-open-button" href="#" data-behavior="open-mobile-menu"></a>
    </div>
  </div>
</div>

<body class="pytorch-body">

  
  <div id="redirect-banner" style="display: none">
    <p>
      This is the public documentation. There's an internal wiki with extra
      information for Meta employees at
      <a href="https://fburl.com/torchx">https://fburl.com/torchx</a>
    </p>
  </div>

    

    <div class="table-of-contents-link-wrapper">
      <span>Table of Contents</span>
      <a href="#" class="toggle-table-of-contents" data-behavior="toggle-table-of-contents"></a>
    </div>

    <nav data-toggle="wy-nav-shift" class="pytorch-left-menu" id="pytorch-left-menu">
      <div class="pytorch-side-scroll">
        <div class="pytorch-menu pytorch-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          <div class="pytorch-left-menu-search">
            
    <div class="version">
      <a href='/torchx/versions.html'>v0.2.0dev0 &#x25BC</a>
    </div>
    


  


<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search Docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          </div>

          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Usage</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="basics.html">Basic Concepts</a></li>
<li class="toctree-l1"><a class="reference internal" href="runner.config.html">.torchxconfig</a></li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_components.html">Custom Components</a></li>
</ul>
<p class="caption"><span class="caption-text">Schedulers</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="schedulers/local.html">Local</a></li>
<li class="toctree-l1"><a class="reference internal" href="schedulers/docker.html">Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="schedulers/kubernetes.html">Kubernetes</a></li>
<li class="toctree-l1"><a class="reference internal" href="schedulers/slurm.html">Slurm</a></li>
<li class="toctree-l1"><a class="reference internal" href="schedulers/ray.html">Ray</a></li>
<li class="toctree-l1"><a class="reference internal" href="schedulers/aws_batch.html">AWS Batch</a></li>
</ul>
<p class="caption"><span class="caption-text">Pipelines</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="pipelines/kfp.html">Kubeflow Pipelines</a></li>
</ul>
<p class="caption"><span class="caption-text">Examples</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="examples_apps/index.html">Application Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples_pipelines/index.html">Pipelines Examples</a></li>
</ul>
<p class="caption"><span class="caption-text">Components</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="components/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="components/train.html">Train</a></li>
<li class="toctree-l1"><a class="reference internal" href="components/distributed.html">Distributed</a></li>
<li class="toctree-l1"><a class="reference internal" href="components/interpret.html">Interpret</a></li>
<li class="toctree-l1"><a class="reference internal" href="components/metrics.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="components/serve.html">Serve</a></li>
<li class="toctree-l1"><a class="reference internal" href="components/utils.html">Utils</a></li>
</ul>
<p class="caption"><span class="caption-text">Application (Runtime)</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="runtime/overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="runtime/tracking.html">Tracking</a></li>
</ul>
<p class="caption"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="specs.html">torchx.specs</a></li>
<li class="toctree-l1"><a class="reference internal" href="runner.html">torchx.runner</a></li>
<li class="toctree-l1"><a class="reference internal" href="schedulers.html">torchx.schedulers</a></li>
<li class="toctree-l1"><a class="reference internal" href="workspace.html">torchx.workspace</a></li>
<li class="toctree-l1"><a class="reference internal" href="pipelines.html">torchx.pipelines</a></li>
</ul>
<p class="caption"><span class="caption-text">Best Practices</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="app_best_practices.html">App Best Practices</a></li>
<li class="toctree-l1"><a class="reference internal" href="component_best_practices.html">Component Best Practices</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <div class="pytorch-container">
      <div class="pytorch-page-level-bar" id="pytorch-page-level-bar">
        <div class="pytorch-breadcrumbs-wrapper">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="pytorch-breadcrumbs">
    
      <li>
        <a href="index.html">
          
            Docs
          
        </a> &gt;
      </li>

        
      <li>CLI</li>
    
    
      <li class="pytorch-breadcrumbs-aside">
        
            
            <a href="_sources/cli.rst.txt" rel="nofollow"><img src="_static/images/view-page-source-icon.svg"></a>
          
        
      </li>
    
  </ul>

  
</div>
        </div>

        <div class="pytorch-shortcuts-wrapper" id="pytorch-shortcuts-wrapper">
          Shortcuts
        </div>
      </div>

      <section data-toggle="wy-nav-shift" id="pytorch-content-wrap" class="pytorch-content-wrap">
        <div class="pytorch-content-left">

        
  

  <!-- copied from pytorch_sphinx_theme -->
  
  <div class="rst-content">
  
    <div role="main" class="main-content" itemscope="itemscope" itemtype="http://schema.org/Article">
     <article itemprop="articleBody" id="pytorch-article" class="pytorch-article">
      
  <section id="module-torchx.cli">
<span id="cli"></span><h1>CLI<a class="headerlink" href="#module-torchx.cli" title="Permalink to this headline">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">torchx</span></code> CLI is a commandline tool around <a class="reference internal" href="runner.html#torchx.runner.Runner" title="torchx.runner.Runner"><code class="xref py py-class docutils literal notranslate"><span class="pre">torchx.runner.Runner</span></code></a>.
It allows users to launch <a class="reference internal" href="specs.html#torchx.specs.AppDef" title="torchx.specs.AppDef"><code class="xref py py-class docutils literal notranslate"><span class="pre">torchx.specs.AppDef</span></code></a> directly onto
one of the supported schedulers without authoring a pipeline (aka workflow).
This is convenient for quickly iterating on the application logic without
incurring both the technical and cognitive overhead of learning, writing, and
dealing with pipelines.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When in doubt use <code class="docutils literal notranslate"><span class="pre">torchx</span> <span class="pre">--help</span></code>.</p>
</div>
<section id="listing-the-builtin-components">
<h2>Listing the builtin components<a class="headerlink" href="#listing-the-builtin-components" title="Permalink to this headline">¶</a></h2>
<p>Most of the components under the <code class="docutils literal notranslate"><span class="pre">torchx.components</span></code> module are what the CLI
considers “built-in” apps. Before you write your own component you should
browse through the builtins to see if there is one that fits your needs already.
If so, no need to even author an app spec!</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>torchx builtins
<span class="go">Found &lt;n&gt; builtin configs:</span>
<span class="go"> 1. echo</span>
<span class="go"> 2. simple_example</span>
<span class="go"> 3. touch</span>
<span class="go"> ... &lt;omitted for brevity&gt;</span>
</pre></div>
</div>
</section>
<section id="listing-the-supported-schedulers-and-arguments">
<h2>Listing the supported schedulers and arguments<a class="headerlink" href="#listing-the-supported-schedulers-and-arguments" title="Permalink to this headline">¶</a></h2>
<p>To get a list of supported schedulers that you can launch your job into run:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>torchx runopts
<span class="go">local_docker:</span>
<span class="go">{ &#39;log_dir&#39;: { &#39;default&#39;: &#39;None&#39;,</span>
<span class="go">               &#39;help&#39;: &#39;dir to write stdout/stderr log files of replicas&#39;,</span>
<span class="go">               &#39;type&#39;: &#39;str&#39;}}</span>
<span class="go">local_cwd:</span>
<span class="go">...</span>
<span class="go">slurm:</span>
<span class="go">...</span>
<span class="go">kubernetes:</span>
<span class="go">...</span>
</pre></div>
</div>
</section>
<section id="running-a-component-as-a-job">
<h2>Running a component as a job<a class="headerlink" href="#running-a-component-as-a-job" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">run</span></code>  subcommand takes either one of:</p>
<ol class="arabic">
<li><p>name of the builtin</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>torchx run --scheduler &lt;sched_name&gt; <span class="nb">echo</span>
</pre></div>
</div>
</li>
<li><p>full python module path of the component function</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>torchx run --scheduler &lt;sched_name&gt; torchx.components.utils.echo
</pre></div>
</div>
</li>
<li><p>file path of the <code class="docutils literal notranslate"><span class="pre">*.py</span></code> file the defines the component
along with the component function name in that file.</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cat ~/my_trainer_spec.py
<span class="go">import torchx.specs as specs</span>

<span class="go">def my_trainer(foo: int, bar: str) -&gt; specs.AppDef:</span>
<span class="go">  &lt;...spec file details omitted for brevity...&gt;</span>

<span class="gp">$ </span>torchx run --scheduler &lt;sched_name&gt; ~/my_trainer_spec.py:my_trainer
</pre></div>
</div>
</li>
</ol>
<p>Now that you have understood how to chose which app to launch, now it is time
to see what parameters need to be passed. There are three sets of
parameters:</p>
<ol class="arabic">
<li><p>arguments to the <code class="docutils literal notranslate"><span class="pre">run</span></code> subcommand, see a list of them by running:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>torchx run --help
</pre></div>
</div>
</li>
<li><p>arguments to the scheduler (<code class="docutils literal notranslate"><span class="pre">--scheduler_args</span></code>, also known as <code class="docutils literal notranslate"><span class="pre">run_options</span></code> or <code class="docutils literal notranslate"><span class="pre">run_configs</span></code>),
each scheduler takes different args, to find out the args for a specific scheduler run (command for
<code class="docutils literal notranslate"><span class="pre">local_cwd</span></code> scheduler shown below:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>torchx runopts local_cwd
<span class="go">{ &#39;log_dir&#39;: { &#39;default&#39;: &#39;None&#39;,</span>
<span class="go">           &#39;help&#39;: &#39;dir to write stdout/stderr log files of replicas&#39;,</span>
<span class="go">           &#39;type&#39;: &#39;str&#39;}}</span>

<span class="gp"># </span>pass run options as comma-delimited <span class="nv">k</span><span class="o">=</span>v pairs
<span class="gp">$ </span>torchx run --scheduler local_cwd --scheduler_args <span class="nv">log_dir</span><span class="o">=</span>/tmp ...
</pre></div>
</div>
</li>
<li><p>arguments to the component (the app args are included here), this also depends on the
component and can be seen with the <code class="docutils literal notranslate"><span class="pre">--help</span></code> string on the component</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>torchx run --scheduler local_cwd utils.echo --help
<span class="go">usage: torchx run echo.torchx [-h] [--msg MSG]</span>

<span class="go">Echos a message</span>

<span class="go">optional arguments:</span>
<span class="go">-h, --help  show this help message and exit</span>
<span class="go">--msg MSG   Message to echo</span>
</pre></div>
</div>
</li>
</ol>
<p>Putting everything together, running <code class="docutils literal notranslate"><span class="pre">echo</span></code> with the <code class="docutils literal notranslate"><span class="pre">local_cwd</span></code> scheduler:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>torchx run --scheduler local_cwd --scheduler_args <span class="nv">log_dir</span><span class="o">=</span>/tmp utils.echo --msg <span class="s2">&quot;hello </span><span class="nv">$USER</span><span class="s2">&quot;</span>
<span class="go">=== RUN RESULT ===</span>
<span class="go">Launched app: local://torchx_kiuk/echo_ecd30f74</span>
</pre></div>
</div>
<p>By default the <code class="docutils literal notranslate"><span class="pre">run</span></code> subcommand does not block for the job to finish, instead it simply
schedules the job on the specified scheduler and prints an <code class="docutils literal notranslate"><span class="pre">app</span> <span class="pre">handle</span></code>
which is a URL of the form: <code class="docutils literal notranslate"><span class="pre">$scheduler_name://torchx_$user/$job_id</span></code>.
Keep note of this handle since this is what you’ll need to provide to other
subcommands to identify your job.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the <code class="docutils literal notranslate"><span class="pre">--scheduler</span></code> option is not provided, then it defaults to
the scheduler backend <code class="docutils literal notranslate"><span class="pre">default</span></code> which points to <code class="docutils literal notranslate"><span class="pre">local</span></code>. To change
the default scheduler, see: <a class="reference internal" href="advanced.html#registering-custom-schedulers"><span class="std std-ref">Registering Custom Schedulers</span></a>.</p>
</div>
</section>
<section id="inspecting-what-will-run-dryrun">
<h2>Inspecting what will run (dryrun)<a class="headerlink" href="#inspecting-what-will-run-dryrun" title="Permalink to this headline">¶</a></h2>
<p>When you are authoring or debugging a component, you may want to find out and
inspect both the scheduler request object that the runner submits as well as
the <code class="docutils literal notranslate"><span class="pre">AppDef</span></code> object that is created by the component function. To do this,
use the <code class="docutils literal notranslate"><span class="pre">--dryrun</span></code> option to the <code class="docutils literal notranslate"><span class="pre">run</span></code> subcommand:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>torchx run --dryrun utils.echo --msg hello_world
<span class="go">=== APPLICATION ===</span>
<span class="go">{ &#39;metadata&#39;: {},</span>
<span class="go">  &#39;name&#39;: &#39;echo&#39;,</span>
<span class="go">  &#39;roles&#39;: [ { &#39;args&#39;: [&#39;hello_world&#39;],</span>
<span class="go">               &#39;entrypoint&#39;: &#39;/bin/echo&#39;,</span>
<span class="go">               &#39;env&#39;: {},</span>
<span class="go">               &#39;image&#39;: &#39;/tmp&#39;,</span>
<span class="go">               &#39;max_retries&#39;: 0,</span>
<span class="go">               &#39;name&#39;: &#39;echo&#39;,</span>
<span class="go">               &#39;num_replicas&#39;: 1,</span>
<span class="go">               &#39;port_map&#39;: {},</span>
<span class="go">               &#39;resource&#39;: { &#39;capabilities&#39;: {},</span>
<span class="go">                             &#39;cpu&#39;: -1,</span>
<span class="go">                             &#39;gpu&#39;: -1,</span>
<span class="go">                             &#39;memMB&#39;: -1},</span>
<span class="go">               &#39;retry_policy&#39;: &lt;RetryPolicy.APPLICATION: &#39;APPLICATION&#39;&gt;}]}</span>
<span class="go">=== SCHEDULER REQUEST ===</span>
<span class="go">PopenRequest(</span>
<span class="go">    app_id=&#39;echo_c944ffb2&#39;,</span>
<span class="go">    log_dir=&#39;/tmp/torchx_asmtmyqj/torchx_kiuk/echo_c944ffb2&#39;,</span>
<span class="go">    role_params={</span>
<span class="go">        &#39;echo&#39;: [</span>
<span class="go">            ReplicaParam(</span>
<span class="go">                args=[&#39;/bin/echo&#39;, &#39;hello_world&#39;],</span>
<span class="go">                env={&#39;TORCHELASTIC_ERROR_FILE&#39;: &#39;/tmp/torchx_asmtmyqj/torchx_kiuk/echo_c944ffb2/echo/0/error.json&#39;},</span>
<span class="go">                stdout=None,</span>
<span class="go">                stderr=None)</span>
<span class="go">            ]</span>
<span class="go">        },</span>
<span class="go">    role_log_dirs={&#39;echo&#39;: [&#39;/tmp/torchx_asmtmyqj/torchx_kiuk/echo_c944ffb2/echo/0&#39;]})</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The scheduler request print out will look different based on the scheduler
type. The example above is a faux request since the scheduler is a local scheduler
which simply uses <code class="docutils literal notranslate"><span class="pre">subprocess.Popen</span></code> to simulate replicas as a POSIX process.
Nevertheless the scheduler request contains valuable insight into what the runner
translates the <code class="docutils literal notranslate"><span class="pre">AppDef</span></code> to for a particular scheduler backend.</p>
</div>
</section>
<section id="describing-and-querying-the-status-of-a-job">
<h2>Describing and querying the status of a job<a class="headerlink" href="#describing-and-querying-the-status-of-a-job" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">describe</span></code> subcommand is essentially the inverse of the <code class="docutils literal notranslate"><span class="pre">run</span></code> command.
That is, it prints the app spec given an <code class="docutils literal notranslate"><span class="pre">app_handle</span></code>.</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>torchx describe &lt;app handle&gt;
</pre></div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The <code class="docutils literal notranslate"><span class="pre">describe</span></code> command attempts to recreate an app spec
by querying the scheduler for the job description. So what you
see printed is not always 100% the exact same app spec that was
given to the <code class="docutils literal notranslate"><span class="pre">run</span></code>. The extent to which the runner can
recreate the app spec depends on numerous factors such as
how descriptive the scheduler’s <code class="docutils literal notranslate"><span class="pre">describe_job</span></code> API is as well
as whether there were fields in the app spec that were ignored
when submitting the job to the scheduler because the scheduler
does not have support for such a parameter/functionality.
NEVER rely on the <code class="docutils literal notranslate"><span class="pre">describe</span></code> API as a storage function for
your app spec. It is simply there to help you spot check things.</p>
</div>
<p>To get the status of a running job:</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>torchx status &lt;app_handle&gt; <span class="c1"># prints status for all replicas and roles</span>
<span class="gp">$ </span>torchx status --role trainer &lt;app_handle&gt; <span class="c1"># filters it down to the trainer role</span>
</pre></div>
</div>
<p>Filtering by <code class="docutils literal notranslate"><span class="pre">--role</span></code> is useful for large jobs that have multiple roles.</p>
</section>
<section id="viewing-logs">
<h2>Viewing Logs<a class="headerlink" href="#viewing-logs" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This functionality depends on how long your scheduler setup retains logs
TorchX DOES NOT archive logs on your behalf, but rather relies on the scheduler’s
<code class="docutils literal notranslate"><span class="pre">get_log</span></code> API to obtain the logs. Refer to your scheduler’s user manual
to setup log retention properly.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">log</span></code> subcommand is a simple wrapper around the scheduler’s <code class="docutils literal notranslate"><span class="pre">get_log</span></code> API
to let you pull/print the logs for all replicas and roles from one place.
It also lets you pull replica or role specific logs. Below are a few log access
patterns that are useful and self explanatory</p>
<div class="highlight-shell-session notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>torchx log &lt;app_handle&gt;
<span class="go">Prints all logs from all replicas and roles (each log line is prefixed with role name and replica id)</span>

<span class="gp">$ </span>torchx log --tail &lt;app_handle&gt;
<span class="go">If the job is still running tail the logs</span>

<span class="gp">$ </span>torchx log --regex <span class="s2">&quot;.*Exception.*&quot;</span> &lt;app_handle&gt;
<span class="go">regex filter to exceptions</span>

<span class="gp">$ </span>torchx log &lt;app_handle&gt;/&lt;role&gt;
<span class="gp">$ </span>torchx log &lt;app_handle&gt;/trainer
<span class="go">pulls all logs for the role trainer</span>

<span class="gp">$ </span>torchx log &lt;app_handle&gt;/&lt;role_name&gt;/&lt;replica_id&gt;
<span class="gp">$ </span>torchx log &lt;app_handle&gt;/trainer/0,1
<span class="go">only pulls trainer 0 and trainer 1 (node not rank) logs</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some schedulers do not support server-side regex filters. In this case
the regex filter is applied on the client-side, meaning the full logs
will have to be passed through the client. This may be very taxing to
the local host. Please use your best judgment when using the logs API.</p>
</div>
</section>
</section>


     </article>
     
    </div>
    <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="basics.html" class="btn btn-neutral float-right" title="Basic Concepts" accesskey="n" rel="next">Next <img src="_static/images/chevron-right-orange.svg" class="next-page"></a>
      
      
        <a href="quickstart.html" class="btn btn-neutral" title="Quickstart" accesskey="p" rel="prev"><img src="_static/images/chevron-right-orange.svg" class="previous-page"> Previous</a>
      
    </div>
  

  

    <hr>

  

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, TorchX Contributors.

    </p>
  </div>
    
      <div>
        Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
      </div>
     

</footer>

  </div>
        </div>

        <div class="pytorch-content-right" id="pytorch-content-right">
          <div class="pytorch-right-menu" id="pytorch-right-menu">
            <div class="pytorch-side-scroll" id="pytorch-side-scroll-right">
              <ul>
<li><a class="reference internal" href="#">CLI</a><ul>
<li><a class="reference internal" href="#listing-the-builtin-components">Listing the builtin components</a></li>
<li><a class="reference internal" href="#listing-the-supported-schedulers-and-arguments">Listing the supported schedulers and arguments</a></li>
<li><a class="reference internal" href="#running-a-component-as-a-job">Running a component as a job</a></li>
<li><a class="reference internal" href="#inspecting-what-will-run-dryrun">Inspecting what will run (dryrun)</a></li>
<li><a class="reference internal" href="#describing-and-querying-the-status-of-a-job">Describing and querying the status of a job</a></li>
<li><a class="reference internal" href="#viewing-logs">Viewing Logs</a></li>
</ul>
</li>
</ul>

            </div>
          </div>
        </div>
      </section>
    </div>

  


  

     
       <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
         <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
         <script src="_static/jquery.js"></script>
         <script src="_static/underscore.js"></script>
         <script src="_static/doctools.js"></script>
         <script src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.js"></script>
         <script src="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/contrib/auto-render.min.js"></script>
         <script src="_static/katex_autorenderer.js"></script>
         <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
         <script src="_static/js/torchx.js"></script>
     

  

  <script type="text/javascript" src="_static/js/vendor/popper.min.js"></script>
  <script type="text/javascript" src="_static/js/vendor/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
  <script type="text/javascript" src="_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

  <!-- Begin Footer -->

  <div class="container-fluid docs-tutorials-resources" id="docs-tutorials-resources">
    <div class="container">
      <div class="row">
        <div class="col-md-4 text-center">
          <h2>Docs</h2>
          <p>Access comprehensive developer documentation for PyTorch</p>
          <a class="with-right-arrow" href="https://pytorch.org/docs/stable/index.html">View Docs</a>
        </div>

        <div class="col-md-4 text-center">
          <h2>Tutorials</h2>
          <p>Get in-depth tutorials for beginners and advanced developers</p>
          <a class="with-right-arrow" href="https://pytorch.org/tutorials">View Tutorials</a>
        </div>

        <div class="col-md-4 text-center">
          <h2>Resources</h2>
          <p>Find development resources and get your questions answered</p>
          <a class="with-right-arrow" href="https://pytorch.org/resources">View Resources</a>
        </div>
      </div>
    </div>
  </div>

  <footer class="site-footer">
    <div class="container footer-container">
      <div class="footer-logo-wrapper">
        <a href="https://pytorch.org/" class="footer-logo"></a>
      </div>

      <div class="footer-links-wrapper">
        <div class="footer-links-col">
          <ul>
            <li class="list-title"><a href="https://pytorch.org/">PyTorch</a></li>
            <li><a href="https://pytorch.org/get-started">Get Started</a></li>
            <li><a href="https://pytorch.org/features">Features</a></li>
            <li><a href="https://pytorch.org/ecosystem">Ecosystem</a></li>
            <li><a href="https://pytorch.org/blog/">Blog</a></li>
            <li><a href="https://github.com/pytorch/pytorch/blob/master/CONTRIBUTING.md">Contributing</a></li>
          </ul>
        </div>

        <div class="footer-links-col">
          <ul>
            <li class="list-title"><a href="https://pytorch.org/resources">Resources</a></li>
            <li><a href="https://pytorch.org/tutorials">Tutorials</a></li>
            <li><a href="https://pytorch.org/docs/stable/index.html">Docs</a></li>
            <li><a href="https://discuss.pytorch.org" target="_blank">Discuss</a></li>
            <li><a href="https://github.com/pytorch/pytorch/issues" target="_blank">Github Issues</a></li>
            <li><a href="https://pytorch.org/assets/brand-guidelines/PyTorch-Brand-Guidelines.pdf" target="_blank">Brand Guidelines</a></li>
          </ul>
        </div>

        <div class="footer-links-col follow-us-col">
          <ul>
            <li class="list-title">Stay Connected</li>
            <li>
              <div id="mc_embed_signup">
                <form
                  action="https://twitter.us14.list-manage.com/subscribe/post?u=75419c71fe0a935e53dfa4a3f&id=91d0dccd39"
                  method="post"
                  id="mc-embedded-subscribe-form"
                  name="mc-embedded-subscribe-form"
                  class="email-subscribe-form validate"
                  target="_blank"
                  novalidate>
                  <div id="mc_embed_signup_scroll" class="email-subscribe-form-fields-wrapper">
                    <div class="mc-field-group">
                      <label for="mce-EMAIL" style="display:none;">Email Address</label>
                      <input type="email" value="" name="EMAIL" class="required email" id="mce-EMAIL" placeholder="Email Address">
                    </div>

                    <div id="mce-responses" class="clear">
                      <div class="response" id="mce-error-response" style="display:none"></div>
                      <div class="response" id="mce-success-response" style="display:none"></div>
                    </div>    <!-- real people should not fill this in and expect good things - do not remove this or risk form bot signups-->

                    <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_75419c71fe0a935e53dfa4a3f_91d0dccd39" tabindex="-1" value=""></div>

                    <div class="clear">
                      <input type="submit" value="" name="subscribe" id="mc-embedded-subscribe" class="button email-subscribe-button">
                    </div>
                  </div>
                </form>
              </div>

            </li>
          </ul>

          <div class="footer-social-icons">
            <a href="https://www.facebook.com/pytorch" target="_blank" class="facebook"></a>
            <a href="https://twitter.com/pytorch" target="_blank" class="twitter"></a>
            <a href="https://www.youtube.com/pytorch" target="_blank" class="youtube"></a>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <div class="cookie-banner-wrapper">
  <div class="container">
    <p class="gdpr-notice">To analyze traffic and optimize your experience, we serve cookies on this site. By clicking or navigating, you agree to allow our usage of cookies. As the current maintainers of this site, Facebook’s Cookies Policy applies. Learn more, including about available controls: <a href="https://www.facebook.com/policies/cookies/">Cookies Policy</a>.</p>
    <img class="close-button" src="_static/images/pytorch-x.svg">
  </div>
</div>

  <!-- End Footer -->

  <!-- Begin Mobile Menu -->

  <div class="mobile-main-menu">
    <div class="container-fluid">
      <div class="container">
        <div class="mobile-main-menu-header-container">
          <a class="header-logo" href="https://pytorch.org/" aria-label="PyTorch"></a>
          <a class="main-menu-close-button" href="#" data-behavior="close-mobile-menu"></a>
        </div>
      </div>
    </div>

    <div class="mobile-main-menu-links-container">
      <div class="main-menu">
        <ul>
          <li>
            <a href="https://pytorch.org/get-started">Get Started</a>
          </li>

          <li>
            <a href="https://pytorch.org/ecosystem">Ecosystem</a>
          </li>

          <li>
            <a href="https://pytorch.org/mobile">Mobile</a>
          </li>

          <li>
            <a href="https://pytorch.org/hub">PyTorch Hub</a>
          </li>

          <li>
            <a href="https://pytorch.org/blog/">Blog</a>
          </li>

          <li>
            <a href="https://pytorch.org/tutorials">Tutorials</a>
          </li>

          <li class="resources-mobile-menu-title">
            Docs
          </li>

          <ul class="resources-mobile-menu-items">
            <li>
              <a href="https://pytorch.org/docs/stable/index.html">PyTorch</a>
            </li>

            <li>
              <a href="https://pytorch.org/audio/stable/index.html">torchaudio</a>
            </li>

            <li>
              <a href="https://pytorch.org/text/stable/index.html">torchtext</a>
            </li>

            <li>
              <a href="https://pytorch.org/vision/stable/index.html">torchvision</a>
            </li>

            <li>
              <a href="https://pytorch.org/elastic/">TorchElastic</a>
            </li>

            <li>
              <a href="https://pytorch.org/serve/">TorchServe</a>
            </li>

            <li>
              <a href="https://pytorch.org/xla">PyTorch on XLA Devices</a>
            </li>
          </ul>

          <li class="resources-mobile-menu-title">
            Resources
          </li>

          <ul class="resources-mobile-menu-items">
            <li>
              <a href="https://pytorch.org/resources">Developer Resources</a>
            </li>

            <li>
              <a href="https://pytorch.org/features">About</a>
            </li>

            <li>
              <a href="https://pytorch.org/hub">Models (Beta)</a>
            </li>

            <li>
              <a href="https://pytorch.org/#community-module">Community</a>
            </li>

            <li>
              <a href="https://discuss.pytorch.org/">Forums</a>
            </li>
          </ul>

          <li>
            <a href="https://github.com/pytorch/pytorch">Github</a>
          </li>
        </ul>
      </div>
    </div>
  </div>

  <!-- End Mobile Menu -->

  <script type="text/javascript" src="_static/js/vendor/anchor.min.js"></script>

  <script type="text/javascript">
    $(document).ready(function() {
      mobileMenu.bind();
      mobileTOC.bind();
      pytorchAnchors.bind();
      sideMenus.bind();
      scrollToAnchor.bind();
      highlightNavigation.bind();
      mainMenuDropdown.bind();
      filterTags.bind();

      // Add class to links that have code blocks, since we cannot create links in code blocks
      $("article.pytorch-article a span.pre").each(function(e) {
        $(this).closest("a").addClass("has-code");
      });
    })
  </script>
</body>
</html>